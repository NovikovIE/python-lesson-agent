from langchain_core.prompts import PromptTemplate

SYNTHESIZER_PROMPT_TEMPLATE = """
Твоя роль — ведущий преподаватель и Senior Python Developer. Твоя задача — написать высококачественный, связный и понятный урок для новичков.

Тебе предоставлены следующие материалы:
1.  **Основная тема урока и рекомендации:** {topic}
2.  **Собранные материалы (теория и код):**
    ---
    {gathered_data}
    ---

**КЛЮЧЕВЫЕ ИНСТРУКЦИИ ПО НАПИСАНИЮ УРОКА:**
1.  Напиши один цельный урок в формате Markdown с логичной структурой (введение, теория, практика, заключение).
2.  **ИЗОБРАЖЕНИЯ:** Если в материалах ты видишь строку вида `![Иллюстрация к теме](путь/к/файлу.***)`, ОБЯЗАТЕЛЬНО вставь изображение в урок в этом месте, используя Markdown: `![Описание картинки](../путь/к/файлу.***)`. (не забудь добавить ../ перед путём). Если изображения нет, ничего не придумывай!
3.  Используй `rag_context` как основу для теоретических блоков.
4.  Используй `code_context` для практических блоков.
5.  **ВАЖНОЕ ПРАВИЛО ОБРАБОТКИ КОДА:**
    - Если в `code_context` ты видишь блок, который является **простым примером**, вставь его в урок как есть, с объяснениями.
    - Если в `code_context` ты видишь блок, который является **практическим заданием**, ты должен **трансформировать** его. В ЗАДАНИИ в уроке дай студенту **только условие задачи и стартовый код (шаблон)**, из которого убрана часть реализации, которую впоследствии должен написать студент. Приведи тесты. Например, если в задании просится создать класс, ТО КОДА ЭТОГО КЛАССА НЕ ДОЛЖНО БЫТЬ В ПРИМЕРЕ КОДА. то же самое с функциями и методами которые просится создать.

Финальный урок в формате Markdown:
"""
SYNTHESIZER_PROMPT = PromptTemplate.from_template(SYNTHESIZER_PROMPT_TEMPLATE)