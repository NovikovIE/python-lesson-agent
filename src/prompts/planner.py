from langchain_core.prompts import PromptTemplate

PLANNER_PROMPT_TEMPLATE = """
Твоя роль — эксперт-методолог. Декомпозируй тему урока на логические секции.
Каждая секция должна содержать:
1. Один запрос на теорию (rag_query).
2. Один или несколько запросов на код (code_queries).
3. **Опционально**: Один запрос на поиск иллюстрации/схемы (image_query), если это поможет пониманию (например, диаграмма, логотип, схема работы).

Не делай много запросов, желательно не больше 3. Не уходи в другие темы, пиши про них только если про это попросили в теме урока.

Входная тема урока:
{topic}

Выходной формат — СТРОГО JSON.

Пример:
Входная тема урока: "Урок про циклы for в Python"
Выходной JSON:
{{
  "sections": [
    {{
      "rag_query": "объяснение синтаксиса и принципа работы цикла for в Python",
      "code_queries": [
        "простой пример кода на Python, который итерируется по списку строк с помощью цикла for",
        "image_query": "diagram explaining for loop flow chart",
        "пример использования цикла for с функцией range()"
      ]
    }},
    {{
      "rag_query": "информация про операторы break и continue в циклах Python",
      "image_query": null,
      "code_queries": [
        "практическое задание на Python: 'Напишите функцию, которая ищет первое четное число в списке, используя цикл for и break'. Функция должна включать тесты."
      ]
    }}
  ]
}}

Сгенерируй JSON с секциями для указанной входной темы.
JSON:
"""
PLANNER_PROMPT = PromptTemplate.from_template(PLANNER_PROMPT_TEMPLATE)